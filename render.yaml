# render.yaml
# Newton Supercomputer - Render Deployment Configuration

services:
  # Newton API (Python backend)
  - type: web
    name: newton-api
    runtime: python
    buildCommand: pip install -r requirements.txt
    startCommand: gunicorn newton_supercomputer:app --workers 4 --worker-class uvicorn.workers.UvicornWorker --bind 0.0.0.0:$PORT --timeout 30 --keep-alive 5
    envVars:
      - key: PYTHONPATH
        value: /opt/render/project/src
      - key: PYTHONUNBUFFERED
        value: "1"
      - key: NEWTON_STORAGE
        value: /tmp/newton
      - key: WEB_CONCURRENCY
        value: "4"
    healthCheckPath: /health
    autoDeploy: true

# NOTE: Newton Phone (static frontend) should be created manually in Render:
# 1. New > Static Site
# 2. Connect Newton-api repo
# 3. Build Command: (leave empty)
# 4. Publish Directory: . (just a dot)
# 5. Add rewrite rules in Render dashboard for /app, /teachers, /builder
