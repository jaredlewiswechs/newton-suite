<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VoicePath — See What You Hear</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@200;300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'Inter', -apple-system, sans-serif;
            background: #050508;
            color: #fff;
            overflow: hidden;
        }
        
        /* The lyrics container - this IS the visualization */
        #lyrics {
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 70px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 40px;
            overflow: hidden;
        }
        
        /* Each line of lyrics */
        .line {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            align-items: baseline;
            gap: 0.2em;
            margin: 0.3em 0;
            opacity: 0;
            transform: translateY(30px);
            transition: opacity 0.5s ease, transform 0.5s ease;
        }
        
        .line.visible {
            opacity: 1;
            transform: translateY(0);
        }
        
        .line.past {
            opacity: 0.25;
            filter: blur(1px);
        }
        
        .line.future {
            opacity: 0.15;
            filter: blur(2px);
        }
        
        /* Each word - the atomic unit of kinematic transformation */
        .word {
            display: inline-block;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            /* Base styling - will be overridden by JS */
            font-size: 2rem;
            font-weight: 400;
            opacity: 0.6;
        }
        
        .word.current {
            opacity: 1;
            text-shadow: 0 0 30px currentColor, 0 0 60px currentColor;
        }
        
        .word.sung {
            opacity: 0.5;
        }
        
        /* Controls */
        .controls {
            position: fixed;
            bottom: 0; left: 0; right: 0;
            display: flex;
            align-items: center;
            gap: 20px;
            padding: 15px 30px;
            background: linear-gradient(transparent, rgba(0,0,0,0.95));
            z-index: 100;
        }
        
        .song-info { display: flex; flex-direction: column; min-width: 150px; }
        .song-title { font-weight: 600; font-size: 0.95rem; }
        .song-artist { font-size: 0.8rem; color: #666; }
        
        .btn-play {
            width: 50px; height: 50px;
            border-radius: 50%;
            border: 2px solid #4a9eff;
            background: transparent;
            color: #4a9eff;
            cursor: pointer;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
        }
        .btn-play:hover { background: #4a9eff; color: #000; }
        
        .time-bar {
            flex: 1; height: 6px;
            background: rgba(255,255,255,0.1);
            border-radius: 3px;
            overflow: hidden;
            cursor: pointer;
        }
        .time-fill {
            height: 100%; width: 0%;
            background: linear-gradient(90deg, #4a9eff, #a855f7);
            transition: width 0.1s linear;
        }
        
        .demo-select {
            background: rgba(0,0,0,0.5);
            border: 1px solid #333;
            color: #fff;
            padding: 10px 15px;
            border-radius: 8px;
            font-size: 0.9rem;
            cursor: pointer;
        }
        .demo-select:focus { outline: none; border-color: #4a9eff; }
    </style>
</head>
<body>
    <div id="lyrics"></div>
    
    <div class="controls">
        <div class="song-info">
            <span class="song-title" id="song-title">A Day in the Life</span>
            <span class="song-artist" id="song-artist">Kinematic Demo</span>
        </div>
        <button class="btn-play" id="btn-play"><span id="play-icon">▶</span></button>
        <div class="time-bar" id="time-bar"><div class="time-fill" id="time-fill"></div></div>
        <select id="demo-select" class="demo-select">
            <option value="dayinthelife">A Day in the Life</option>
            <option value="spiral">Descending Spiral</option>
            <option value="emotional">Emotional Journey</option>
        </select>
    </div>

    <script>
/**
 * ═══════════════════════════════════════════════════════════════════════════
 * VOICEPATH — The Words ARE the Visualization
 * 
 * Like streaming lyrics, but kinematic:
 *   - Words flow like normal lyrics
 *   - But SIZE reflects TENSION (bigger = more intense)
 *   - VERTICAL OFFSET reflects VALENCE (higher = positive)
 *   - COLOR shifts with emotion
 *   - WEIGHT changes with intensity
 * 
 * You're reading lyrics. But they MOVE with meaning.
 * ═══════════════════════════════════════════════════════════════════════════
 */

const SONGS = {
    dayinthelife: {
        title: "A Day in the Life",
        artist: "Kinematic Demo",
        duration: 65,
        lines: [
            { startTime: 0, words: [
                { text: "I", tension: -0.3, valence: 0.1, duration: 0.4 },
                { text: "read", tension: -0.2, valence: 0.1, duration: 0.5 },
                { text: "the", tension: -0.3, valence: 0.0, duration: 0.3 },
                { text: "news", tension: -0.1, valence: 0.0, duration: 0.6 },
                { text: "today,", tension: -0.2, valence: 0.0, duration: 0.6 },
                { text: "oh", tension: -0.4, valence: -0.2, duration: 0.7 },
                { text: "boy", tension: -0.5, valence: -0.3, duration: 0.9 },
            ]},
            { startTime: 7, words: [
                { text: "About", tension: 0.0, valence: 0.2, duration: 0.5 },
                { text: "a", tension: 0.0, valence: 0.2, duration: 0.3 },
                { text: "lucky", tension: 0.3, valence: 0.5, duration: 0.6 },
                { text: "man", tension: 0.4, valence: 0.4, duration: 0.5 },
                { text: "who", tension: 0.2, valence: 0.3, duration: 0.4 },
                { text: "made", tension: 0.3, valence: 0.5, duration: 0.5 },
                { text: "the", tension: 0.2, valence: 0.4, duration: 0.3 },
                { text: "grade", tension: 0.4, valence: 0.6, duration: 0.9 },
            ]},
            { startTime: 14, words: [
                { text: "And", tension: 0.1, valence: 0.1, duration: 0.4 },
                { text: "though", tension: 0.2, valence: 0.0, duration: 0.5 },
                { text: "the", tension: 0.1, valence: -0.1, duration: 0.3 },
                { text: "news", tension: 0.2, valence: -0.2, duration: 0.5 },
                { text: "was", tension: 0.1, valence: -0.3, duration: 0.4 },
                { text: "rather", tension: 0.0, valence: -0.4, duration: 0.6 },
                { text: "sad", tension: -0.2, valence: -0.7, duration: 1.0 },
            ]},
            { startTime: 21, words: [
                { text: "Well,", tension: 0.2, valence: 0.1, duration: 0.5 },
                { text: "I", tension: 0.3, valence: 0.2, duration: 0.3 },
                { text: "just", tension: 0.4, valence: 0.3, duration: 0.4 },
                { text: "had", tension: 0.5, valence: 0.4, duration: 0.4 },
                { text: "to", tension: 0.5, valence: 0.4, duration: 0.3 },
                { text: "laugh", tension: 0.7, valence: 0.6, duration: 1.1 },
            ]},
            { startTime: 28, words: [
                { text: "I", tension: -0.1, valence: -0.1, duration: 0.4 },
                { text: "saw", tension: -0.2, valence: -0.2, duration: 0.5 },
                { text: "the", tension: -0.3, valence: -0.3, duration: 0.3 },
                { text: "photograph", tension: -0.4, valence: -0.5, duration: 1.4 },
            ]},
            { startTime: 36, words: [
                { text: "Woke", tension: 0.3, valence: 0.1, duration: 0.5 },
                { text: "up,", tension: 0.4, valence: 0.2, duration: 0.5 },
                { text: "fell", tension: 0.5, valence: -0.1, duration: 0.5 },
                { text: "out", tension: 0.6, valence: -0.2, duration: 0.4 },
                { text: "of", tension: 0.5, valence: -0.1, duration: 0.3 },
                { text: "bed", tension: 0.4, valence: 0.0, duration: 0.6 },
            ]},
            { startTime: 43, words: [
                { text: "Dragged", tension: 0.3, valence: -0.1, duration: 0.6 },
                { text: "a", tension: 0.2, valence: 0.0, duration: 0.3 },
                { text: "comb", tension: 0.2, valence: 0.1, duration: 0.5 },
                { text: "across", tension: 0.3, valence: 0.1, duration: 0.5 },
                { text: "my", tension: 0.2, valence: 0.0, duration: 0.3 },
                { text: "head", tension: 0.3, valence: 0.1, duration: 0.6 },
            ]},
            { startTime: 50, words: [
                { text: "Found", tension: 0.1, valence: 0.2, duration: 0.5 },
                { text: "my", tension: 0.0, valence: 0.2, duration: 0.3 },
                { text: "way", tension: 0.1, valence: 0.3, duration: 0.4 },
                { text: "downstairs", tension: 0.0, valence: 0.2, duration: 0.7 },
                { text: "and", tension: -0.1, valence: 0.2, duration: 0.3 },
                { text: "drank", tension: -0.2, valence: 0.3, duration: 0.5 },
                { text: "a", tension: -0.2, valence: 0.3, duration: 0.3 },
                { text: "cup", tension: -0.3, valence: 0.4, duration: 0.6 },
            ]},
            { startTime: 58, words: [
                { text: "Looking", tension: 0.2, valence: 0.3, duration: 0.6 },
                { text: "up,", tension: 0.3, valence: 0.4, duration: 0.5 },
                { text: "I", tension: 0.4, valence: 0.2, duration: 0.3 },
                { text: "noticed", tension: 0.5, valence: 0.0, duration: 0.6 },
                { text: "I", tension: 0.6, valence: -0.2, duration: 0.3 },
                { text: "was", tension: 0.7, valence: -0.3, duration: 0.4 },
                { text: "late", tension: 0.8, valence: -0.4, duration: 1.0 },
            ]},
        ]
    },
    spiral: {
        title: "Descending Spiral",
        artist: "Verified Trajectory",
        duration: 50,
        lines: [
            { startTime: 0, words: [
                { text: "Circle", tension: -0.3, valence: 0.4, duration: 0.6 },
                { text: "one", tension: -0.2, valence: 0.4, duration: 0.5 },
                { text: "begins", tension: -0.1, valence: 0.3, duration: 0.7 },
            ]},
            { startTime: 4, words: [
                { text: "Rising", tension: 0.1, valence: 0.5, duration: 0.6 },
                { text: "on", tension: 0.2, valence: 0.5, duration: 0.4 },
                { text: "the", tension: 0.2, valence: 0.4, duration: 0.3 },
                { text: "surface", tension: 0.3, valence: 0.4, duration: 0.7 },
            ]},
            { startTime: 9, words: [
                { text: "Seeming", tension: 0.4, valence: 0.3, duration: 0.6 },
                { text: "to", tension: 0.4, valence: 0.2, duration: 0.3 },
                { text: "climb", tension: 0.5, valence: 0.2, duration: 0.7 },
            ]},
            { startTime: 13, words: [
                { text: "But", tension: 0.3, valence: 0.0, duration: 0.4 },
                { text: "underneath...", tension: 0.2, valence: -0.2, duration: 1.2 },
            ]},
            { startTime: 18, words: [
                { text: "...we", tension: 0.1, valence: -0.3, duration: 0.5 },
                { text: "descend", tension: 0.0, valence: -0.5, duration: 1.0 },
            ]},
            { startTime: 23, words: [
                { text: "Circle", tension: -0.2, valence: 0.2, duration: 0.6 },
                { text: "two", tension: -0.1, valence: 0.2, duration: 0.5 },
            ]},
            { startTime: 27, words: [
                { text: "The", tension: 0.0, valence: 0.1, duration: 0.3 },
                { text: "pattern", tension: 0.1, valence: 0.1, duration: 0.6 },
                { text: "repeats", tension: 0.2, valence: 0.0, duration: 0.7 },
            ]},
            { startTime: 31, words: [
                { text: "Higher,", tension: 0.4, valence: 0.1, duration: 0.6 },
                { text: "they", tension: 0.3, valence: 0.0, duration: 0.4 },
                { text: "say", tension: 0.2, valence: -0.1, duration: 0.6 },
            ]},
            { startTime: 35, words: [
                { text: "Lower", tension: 0.1, valence: -0.4, duration: 0.6 },
                { text: "we", tension: 0.0, valence: -0.5, duration: 0.4 },
                { text: "go", tension: -0.1, valence: -0.6, duration: 0.7 },
            ]},
            { startTime: 40, words: [
                { text: "Final", tension: -0.2, valence: -0.3, duration: 0.6 },
                { text: "circle", tension: -0.3, valence: -0.4, duration: 0.6 },
            ]},
            { startTime: 44, words: [
                { text: "We", tension: -0.1, valence: -0.5, duration: 0.4 },
                { text: "were", tension: 0.0, valence: -0.6, duration: 0.4 },
                { text: "always", tension: 0.1, valence: -0.7, duration: 0.6 },
                { text: "falling", tension: 0.0, valence: -0.8, duration: 1.0 },
            ]},
            { startTime: 48, words: [
                { text: "Down", tension: -0.3, valence: -0.9, duration: 1.8 },
            ]},
        ]
    },
    emotional: {
        title: "Emotional Journey",
        artist: "Newton Engine",
        duration: 40,
        lines: [
            { startTime: 0, words: [
                { text: "Quiet", tension: -0.8, valence: -0.3, duration: 0.7 },
                { text: "sorrow", tension: -0.7, valence: -0.6, duration: 0.8 },
                { text: "sits", tension: -0.6, valence: -0.5, duration: 0.5 },
            ]},
            { startTime: 5, words: [
                { text: "Then", tension: -0.4, valence: -0.2, duration: 0.4 },
                { text: "something", tension: -0.2, valence: 0.0, duration: 0.6 },
                { text: "stirs", tension: 0.0, valence: 0.2, duration: 0.6 },
            ]},
            { startTime: 10, words: [
                { text: "Hope", tension: 0.2, valence: 0.5, duration: 0.6 },
                { text: "rises", tension: 0.3, valence: 0.6, duration: 0.6 },
                { text: "gentle", tension: 0.1, valence: 0.7, duration: 0.7 },
            ]},
            { startTime: 15, words: [
                { text: "Peace", tension: -0.5, valence: 0.8, duration: 0.7 },
                { text: "settles", tension: -0.6, valence: 0.7, duration: 0.6 },
                { text: "soft", tension: -0.7, valence: 0.6, duration: 0.6 },
            ]},
            { startTime: 20, words: [
                { text: "But", tension: 0.0, valence: 0.3, duration: 0.4 },
                { text: "then—", tension: 0.3, valence: 0.1, duration: 0.5 },
            ]},
            { startTime: 23, words: [
                { text: "RAGE", tension: 0.9, valence: -0.7, duration: 1.0 },
                { text: "erupts", tension: 0.95, valence: -0.6, duration: 0.8 },
            ]},
            { startTime: 27, words: [
                { text: "FIRE", tension: 1.0, valence: -0.5, duration: 0.7 },
                { text: "and", tension: 0.9, valence: -0.4, duration: 0.3 },
                { text: "FURY", tension: 1.0, valence: -0.6, duration: 0.9 },
            ]},
            { startTime: 32, words: [
                { text: "slowly", tension: 0.5, valence: -0.3, duration: 0.7 },
                { text: "fading", tension: 0.3, valence: -0.2, duration: 0.7 },
            ]},
            { startTime: 36, words: [
                { text: "to", tension: 0.0, valence: 0.0, duration: 0.4 },
                { text: "stillness", tension: -0.5, valence: 0.1, duration: 1.0 },
            ]},
        ]
    }
};

// ═══════════════════════════════════════════════════════════════════════════
// VOICEPATH — Streaming Kinematic Lyrics
// ═══════════════════════════════════════════════════════════════════════════

class VoicePath {
    constructor() {
        this.lyricsEl = document.getElementById('lyrics');
        this.playBtn = document.getElementById('btn-play');
        this.playIcon = document.getElementById('play-icon');
        this.timeFill = document.getElementById('time-fill');
        this.demoSelect = document.getElementById('demo-select');
        this.titleEl = document.getElementById('song-title');
        this.artistEl = document.getElementById('song-artist');
        
        this.song = null;
        this.lineEls = [];
        this.wordEls = [];
        this.isPlaying = false;
        this.currentTime = 0;
        this.startTimestamp = null;
        
        this.init();
    }
    
    init() {
        this.playBtn.addEventListener('click', () => this.toggle());
        this.demoSelect.addEventListener('change', e => { this.stop(); this.loadSong(e.target.value); });
        document.getElementById('time-bar').addEventListener('click', e => {
            if (!this.song) return;
            const rect = e.target.getBoundingClientRect();
            this.seekTo((e.clientX - rect.left) / rect.width * this.song.duration);
        });
        
        this.loadSong('dayinthelife');
        this.animate();
    }
    
    loadSong(id) {
        this.song = SONGS[id];
        if (!this.song) return;
        
        this.titleEl.textContent = this.song.title;
        this.artistEl.textContent = this.song.artist;
        this.currentTime = 0;
        this.timeFill.style.width = '0%';
        
        // Build DOM for lyrics
        this.lyricsEl.innerHTML = '';
        this.lineEls = [];
        this.wordEls = [];
        
        for (const line of this.song.lines) {
            const lineEl = document.createElement('div');
            lineEl.className = 'line';
            lineEl.dataset.startTime = line.startTime;
            
            let wordTime = line.startTime;
            for (const word of line.words) {
                const wordEl = document.createElement('span');
                wordEl.className = 'word';
                wordEl.textContent = word.text;
                wordEl.dataset.startTime = wordTime;
                wordEl.dataset.endTime = wordTime + word.duration;
                wordEl.dataset.tension = word.tension;
                wordEl.dataset.valence = word.valence;
                
                // Apply initial kinematic styling (static)
                this.styleWord(wordEl, word.tension, word.valence, false);
                
                lineEl.appendChild(wordEl);
                this.wordEls.push(wordEl);
                wordTime += word.duration;
            }
            
            lineEl.dataset.endTime = wordTime;
            this.lyricsEl.appendChild(lineEl);
            this.lineEls.push(lineEl);
        }
    }
    
    styleWord(el, tension, valence, isCurrent) {
        // SIZE: tension affects font size (1.5rem to 4rem)
        const size = 2 + tension * 1.2;
        
        // WEIGHT: tension affects boldness (300 to 800)
        const weight = Math.round(450 + tension * 300);
        
        // VERTICAL OFFSET: valence moves word up/down (-20px to +20px)
        const yOffset = -valence * 25;
        
        // COLOR: quadrant-based
        const color = this.getColor(tension, valence);
        
        el.style.fontSize = size + 'rem';
        el.style.fontWeight = weight;
        el.style.transform = `translateY(${yOffset}px)`;
        el.style.color = color;
        
        if (isCurrent) {
            el.style.textShadow = `0 0 30px ${color}, 0 0 60px ${color}`;
        } else {
            el.style.textShadow = 'none';
        }
    }
    
    getColor(tension, valence) {
        // Quadrants:
        // Top-left (calm+positive): soft green #81c784
        // Top-right (intense+positive): gold #ffb74d
        // Bottom-left (calm+negative): indigo #5c6bc0
        // Bottom-right (intense+negative): red #ef5350
        
        const tx = (tension + 1) / 2;  // 0-1
        const vy = (valence + 1) / 2;  // 0-1
        
        // Top row interpolation (green to gold)
        const topR = Math.round(129 + (255 - 129) * tx);
        const topG = Math.round(199 + (183 - 199) * tx);
        const topB = Math.round(132 + (77 - 132) * tx);
        
        // Bottom row interpolation (indigo to red)
        const botR = Math.round(92 + (239 - 92) * tx);
        const botG = Math.round(107 + (83 - 107) * tx);
        const botB = Math.round(192 + (80 - 192) * tx);
        
        // Vertical interpolation
        const r = Math.round(botR + (topR - botR) * vy);
        const g = Math.round(botG + (topG - botG) * vy);
        const b = Math.round(botB + (topB - botB) * vy);
        
        return `rgb(${r}, ${g}, ${b})`;
    }
    
    toggle() { this.isPlaying ? this.pause() : this.play(); }
    
    play() {
        if (!this.song) return;
        this.isPlaying = true;
        this.startTimestamp = performance.now() - this.currentTime * 1000;
        this.playIcon.textContent = '❚❚';
    }
    
    pause() {
        this.isPlaying = false;
        this.playIcon.textContent = '▶';
    }
    
    stop() {
        this.pause();
        this.currentTime = 0;
        this.timeFill.style.width = '0%';
    }
    
    seekTo(t) {
        this.currentTime = Math.max(0, Math.min(t, this.song.duration));
        if (this.isPlaying) {
            this.startTimestamp = performance.now() - this.currentTime * 1000;
        }
    }
    
    animate() {
        requestAnimationFrame(() => this.animate());
        
        if (this.isPlaying && this.song) {
            this.currentTime = (performance.now() - this.startTimestamp) / 1000;
            if (this.currentTime >= this.song.duration) {
                this.stop();
                return;
            }
            this.timeFill.style.width = (this.currentTime / this.song.duration * 100) + '%';
        }
        
        this.updateDisplay();
    }
    
    updateDisplay() {
        if (!this.song) return;
        const t = this.currentTime;
        
        // Update lines visibility
        for (const lineEl of this.lineEls) {
            const start = parseFloat(lineEl.dataset.startTime);
            const end = parseFloat(lineEl.dataset.endTime);
            
            const isActive = t >= start - 0.5 && t < end + 2;
            const isPast = t >= end + 2;
            const isFuture = t < start - 0.5;
            
            lineEl.classList.toggle('visible', isActive);
            lineEl.classList.toggle('past', isPast);
            lineEl.classList.toggle('future', isFuture && !isActive);
        }
        
        // Update words
        for (const wordEl of this.wordEls) {
            const start = parseFloat(wordEl.dataset.startTime);
            const end = parseFloat(wordEl.dataset.endTime);
            const tension = parseFloat(wordEl.dataset.tension);
            const valence = parseFloat(wordEl.dataset.valence);
            
            const isCurrent = t >= start && t < end;
            const isSung = t >= end;
            
            wordEl.classList.toggle('current', isCurrent);
            wordEl.classList.toggle('sung', isSung);
            
            // Re-apply styling with current state
            this.styleWord(wordEl, tension, valence, isCurrent);
        }
    }
}

// Start
document.addEventListener('DOMContentLoaded', () => {
    window.voicePath = new VoicePath();
    console.log('VoicePath loaded — The words ARE the visualization');
});
    </script>
</body>
</html>
