// ═══════════════════════════════════════════════════════════════════════════════
// NOTES.APP — Example Nina Desktop Application in TinyTalk
// ═══════════════════════════════════════════════════════════════════════════════
//
// This is a sample TinyTalk application demonstrating how to build
// Nina Desktop apps using the Foghorn kernel.
//
// Run with: POST /foghorn/tinytalk { "code": "<contents>" }
//
// © 2026 Jared Lewis · Ada Computing Company · Houston, Texas
// ═══════════════════════════════════════════════════════════════════════════════

// ---------------------------------------------------------------------------
// 1. CREATE SOME NOTES
// ---------------------------------------------------------------------------

let newton = Card.new(
    "Newton's Laws",
    "1. Objects in motion stay in motion\n2. F = ma\n3. Action = Reaction",
    ["physics", "mechanics"]
)

let calculus = Card.new(
    "Calculus Fundamentals", 
    "Derivatives, integrals, limits. The mathematics of change.",
    ["math", "calculus"]
)

let relativity = Card.new(
    "Special Relativity",
    "E = mc². Nothing travels faster than light. Time is relative.",
    ["physics", "einstein"]
)

// ---------------------------------------------------------------------------
// 2. CONNECT THEM WITH RELATIONSHIPS
// ---------------------------------------------------------------------------

// Newton's laws led to calculus being developed
Link.new(newton["hash"], calculus["hash"], "relates_to")

// Relativity builds on Newton
Link.new(newton["hash"], relativity["hash"], "precedes")

// ---------------------------------------------------------------------------
// 3. QUERY THE WORKSPACE
// ---------------------------------------------------------------------------

let all_cards = Card.all()
let count = Workspace.count()

// ---------------------------------------------------------------------------
// 4. INSPECT AN OBJECT
// ---------------------------------------------------------------------------

let newton_info = inspect(newton)

// ---------------------------------------------------------------------------
// 5. RUN A SERVICE
// ---------------------------------------------------------------------------

let echo_result = Services.run("Echo", newton)

// ---------------------------------------------------------------------------
// 6. RETURN APP STATE
// ---------------------------------------------------------------------------

{
    "app": "Notes.app",
    "version": "1.0",
    "workspace": {
        "total_objects": count,
        "cards": len(all_cards)
    },
    "sample_card": {
        "title": newton["title"],
        "tags": newton["tags"]
    }
}
